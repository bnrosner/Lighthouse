<h3 class="page-header">
  My Classes
  <div class = "pull-right">
    <div class = "dropdown">
      <button class="btn btn-sm btn-neutral dropdown-toggle" type="button" data-toggle="dropdown">Delete a Class
      <span class="caret"></span></button>
      <ul class="dropdown-menu">
        <%@students.each do |student| %>
            <li><%= link_to student.course.name, student_url(student), method:  :delete, data: {confirm: "Seriously?"} %></li>
        <%end%>
      </ul>
    </div>
  </div>

  <div class = "pull-right">
  &nbsp
  </div>
  
  <div class="pull-right">
    <div class="dropdown">
      <button class="btn btn-sm btn-neutral dropdown-toggle" type="button" data-toggle="dropdown">Add a Class
      <span class="caret"></span></button>
      <ul class="dropdown-menu">
        <%student_courses = @students.map {|a| Course.find_by(id: a.course_id)} %>
        <%@courses.each do |course| %>
          <%if student_courses.include?(course)==false%>
            <li><%= link_to course.name, students_url(course.id), method:  :post%></li>
          <%end%>
        <%end%>
      </ul>
      </div>
    </div>
  
  <div class = "pull-right">
  &nbsp
  </div>

  <div class="pull-right">
    <p>
      <% @students.each do |student| %>
        <%if student.active%>
          <%= link_to student.course.name, student_url(student), method:  :patch, class:"btn btn-sm btn-primary"%>
        <%else%>
          <%= link_to student.course.name, student_url(student), method:  :patch, class:"btn btn-sm btn-default"%>
        <%end%>
      <% end %>
    </p>
  </div> 
</h3>

  <span class="pull-left">
    <% active_student = Student.find_by(active: true, user_id: current_user.id) %>
    <% if !active_student.nil? %>
      <% active_student.course.homeworks.each do |homework| %>  
        <%if homework.active == true%>
          <%= link_to homework.name, course_homework_url(@course, homework), method:  :patch, class:"btn btn-sm btn-primary"%>
        <%else%>
          <%= link_to homework.name, course_homework_url(@course, homework), method:  :patch, class:"btn btn-sm btn-default"%>
        <%end%>
      <%end%>
    <% end%>
    </p>
  </span>

  <br></br>
<h3 class %>
<span class = "pull-left">
  <% if !active_student.nil? %>
    <% active_student.course.homeworks.each do |homework| %>  
      <% if homework.active == true %>
         <% hwsubmission = HWSubmission.find_by(homework_id: homework.id, student_id: active_student.id)%>
         <% if !hwsubmission.nil? %>
           <ul> <%= hwsubmission.student.user.name %> 
           <% counter = 1 %>
           <%=hwsubmission.homework.num_questions.times do %>
             <%= counter %>
             <% counter = counter + 1%>
           <% end %>
           </ul>
           <% hwsubmissions = HWSubmission.where(homework_id: homework.id) %>
           <%hwsubmissions.each do |hw_submission| %>
             <% if hw_submission != hwsubmission %>
               <ul>
               <%= hw_submission.student.user.name%>
               <% counter = 1 %>
               <%=hw_submission.homework.num_questions.times do %>
                 <%= counter %>
                 <% counter = counter + 1%>
               <% end %>
               </ul>
             <% end %>
           <% end %>
        <% else %>
          <%= link_to "Start Homework", hwsubmissions_url(homework.id), method:  :post %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
</span>
</h3>

